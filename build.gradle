// Copyright 2016 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.

// TODO(devoncarew): Update when intellij-plugin-service 0.2.0 is available.
// See: https://github.com/JetBrains/gradle-intellij-plugin/blob/master/README.md.
buildscript {
  repositories {
    mavenCentral()
    maven {
      url "https://oss.sonatype.org/content/repositories/snapshots/"
    }
    maven {
      url 'http://dl.bintray.com/jetbrains/intellij-plugin-service'
    }
  }
  dependencies {
    classpath "org.jetbrains.intellij.plugins:gradle-intellij-plugin:0.2.0-SNAPSHOT"
  }
}

apply plugin: 'org.jetbrains.intellij'

allprojects {
  sourceSets {
    main {
      java.srcDirs 'src', 'gen', 'third_party/intellij-plugins-dart/src'
      resources.srcDir 'resources'
    }
    test {
      java.srcDirs 'testSrc', 'third_party/intellij-plugins-dart/testSrc'
    }
  }

  intellij {
    pluginName = 'Flutter'

    version = '2016.3'
    plugins = ['Dart:163.8651']

    // IntelliJ IDEA 2016.1.4 (~Android Studio 2.2) / IC-145.2070.6
    // Dart 145.971.7
    // version = '145.2070.6'
    // plugins = ['Dart:145.971.7']
  }
}

intellij.systemProperty('flutter.sdk', System.getenv('FLUTTER_SDK'))
